Static Functions

Ever write a little piece of code like this and PHPStorm tells you to use a static closure because "This closure can be declared as static (better scoping; in some cases can improve performance)."?


```php
    $evens = array_map(fn($hex) => hexdec($hex) % 2 ? true : null, $foo);
```

#1. "Better Scoping." It's not in a class scope, so there is no `$this` that the closure has to look for. Whoopie.

#2. "Improve Performance." How much performance? It will vary from machine to machine, the environment, how many other tasks are going on at the same time, and other factors. But how much performance right now on my machine?

This script checks 4 different styles of closures: with and without static, and with and without namespaces.

Theoretically, according to some posting I saw somewhere some time ago, `\wordwrap()` will run slightly faster than `wordwrap` because one is already namespaced, and the other isn't. Maybe it is, maybe it isn't. Maybe it is now, maybe it isn't.

Run the script in your CLI, copy the output to your favorite `python` environment, and find out. For me, right now, it's

```python
# Beginning of plot.py

import pandas as pd
import matplotlib.pyplot as plt

plt.close("all")

d = {
    'nonStaticNonNamespace': pd.Series([
        0.068063020706177, 0.075644969940186, 0.069326877593994, 0.073163032531738,
        0.067205905914307, 0.070333003997803, 0.066574811935425, 0.072113037109375,
        0.066870927810669, 0.071335792541504, 0.071233034133911, 0.067425012588501,
        0.069232940673828, 0.077289819717407, 0.067346096038818, 0.066190004348755,
        0.072398900985718, 0.066190958023071, 0.078057050704956, 0.066723108291626,
        0.067826986312866, 0.077508926391602, 0.06689190864563, 0.074942111968994,
        0.067141056060791, 0.066337108612061, 0.073179006576538, 0.0714111328125,
        0.067727088928223, 0.076755046844482, 0.078832149505615, 0.070127964019775,
        0.067806959152222, 0.069414854049683, 0.070027828216553, 0.066724061965942,
        0.066687107086182, 0.067983150482178, 0.067469120025635, 0.071262836456299,
        0.06661319732666, 0.066459894180298, 0.068143844604492, 0.067049026489258,
        0.067811965942383, 0.069005012512207, 0.069681882858276, 0.072356939315796,
        0.072191953659058, 0.066767930984497, 0.066521883010864, 0.067702054977417,
        0.066679000854492, 0.070334911346436, 0.067299127578735, 0.06935977935791,
        0.065412998199463, 0.067960977554321, 0.065814971923828, 0.066670894622803,
        0.070872068405151, 0.069153070449829, 0.074483156204224, 0.066164970397949,
        0.070791006088257, 0.067697048187256, 0.071649074554443, 0.066471099853516,
        0.067235231399536, 0.066517114639282]),
    'staticNonNamespace': pd.Series([
        0.069170951843262, 0.07062816619873, 0.071491003036499, 0.069077014923096,
        0.071254014968872, 0.073545932769775, 0.071649074554443, 0.070044994354248,
        0.071959018707275, 0.072422027587891, 0.073477983474731, 0.067681074142456,
        0.068024873733521, 0.073608875274658, 0.075054168701172, 0.073860883712769,
        0.070125102996826, 0.068169116973877, 0.067631959915161, 0.068824052810669,
        0.067344903945923, 0.069189786911011, 0.067083120346069, 0.066044092178345,
        0.066087961196899, 0.072780847549438, 0.071085929870605, 0.067779064178467,
        0.065397024154663, 0.066869974136353, 0.065845966339111, 0.06908106803894,
        0.069248199462891, 0.068897008895874, 0.067448854446411, 0.069133996963501,
        0.067921876907349, 0.068081140518188, 0.070346832275391, 0.091377019882202,
        0.076151132583618, 0.071686983108521, 0.066738843917847, 0.069268941879272,
        0.067625999450684, 0.06897497177124, 0.066620111465454, 0.067179918289185,
        0.0744948387146, 0.072916030883789, 0.073084115982056, 0.067451000213623,
        0.067821979522705, 0.067056894302368, 0.066781997680664, 0.066082000732422,
        0.06957483291626, 0.067096948623657, 0.065176010131836, 0.067170143127441,
        0.07280707359314, 0.065988063812256, 0.073648929595947, 0.067806005477905,
        0.066251993179321, 0.06895899772644, 0.066819906234741, 0.06560492515564,
        0.073229074478149, 0.068450927734375]),
    'nonStaticNamespace': pd.Series([
        0.067669868469238, 0.070543050765991, 0.068320035934448, 0.068169832229614,
        0.067357063293457, 0.068314075469971, 0.075708150863647, 0.067329883575439,
        0.071012020111084, 0.069530963897705, 0.066609859466553, 0.068915128707886,
        0.071322202682495, 0.070936918258667, 0.073852062225342, 0.067130088806152,
        0.066769123077393, 0.06998610496521, 0.070734024047852, 0.07399582862854,
        0.070919036865234, 0.068814992904663, 0.070523977279663, 0.066725969314575,
        0.068526029586792, 0.06831693649292, 0.06798791885376, 0.07008695602417,
        0.068665027618408, 0.066193819046021, 0.070794105529785, 0.066756963729858,
        0.070554971694946, 0.072206020355225, 0.066673994064331, 0.070168018341064,
        0.03259801864624, 0.071518898010254, 0.069898128509521, 0.070645093917847,
        0.067699909210205, 0.065621137619019, 0.074670076370239, 0.07045578956604,
        0.079913854598999, 0.068060874938965, 0.065561056137085, 0.072268962860107,
        0.065651893615723, 0.067306995391846, 0.066931962966919, 0.078049182891846,
        0.066167831420898, 0.069445133209229, 0.072670936584473, 0.067287921905518,
        0.074206829071045, 0.070889949798584, 0.066696166992188, 0.0714430809021,
        0.069700956344604, 0.07243013381958, 0.072948932647705, 0.068908929824829,
        0.071901798248291, 0.068197965621948, 0.066239833831787, 0.065663814544678,
        0.066650152206421, 0.073253870010376]),
    'staticNamespace': pd.Series([
        0.067241907119751, 0.066078186035156, 0.070518970489502, 0.067949056625366,
        0.073330163955688, 0.070842027664185, 0.070323944091797, 0.066067934036255,
        0.06679892539978, 0.076343059539795, 0.067476987838745, 0.068387985229492,
        0.068585872650146, 0.068245887756348, 0.067407846450806, 0.068429946899414,
        0.070535898208618, 0.066919088363647, 0.071292877197266, 0.07021689414978,
        0.068732976913452, 0.066941022872925, 0.067016839981079, 0.065881967544556,
        0.069092035293579, 0.069344043731689, 0.07408595085144, 0.070204973220825,
        0.070137977600098, 0.071865081787109, 0.068711042404175, 0.068534851074219,
        0.066057920455933, 0.067645072937012, 0.067072868347168, 0.066204071044922,
        0.07362699508667, 0.066927194595337, 0.069975137710571, 0.070823907852173,
        0.065834999084473, 0.066490888595581, 0.068706035614014, 0.065165996551514,
        0.06938099861145, 0.067244052886963, 0.068955898284912, 0.069727897644043,
        0.067115068435669, 0.067235946655273, 0.066572189331055, 0.069914102554321,
        0.064827919006348, 0.067306041717529, 0.067095994949341, 0.067761898040771,
        0.067806005477905, 0.068926811218262, 0.067343950271606, 0.071719884872437,
        0.066431045532227, 0.075572967529297, 0.066608190536499, 0.068101167678833,
        0.070676803588867, 0.066368818283081, 0.070480823516846, 0.066648006439209,
        0.066681861877441, 0.068356990814209]),
}
df = pd.DataFrame(d)

print(df.describe())
plt.figure(num=1, figsize=(8, 6), dpi=100)
df.boxplot()
plt.show()

### End

```
![My benchmarks](https://github.com/jefhar/benchmarks/blob/master/Figure_1.png?raw=true)

Here's the important part: Unless you're iterating over more than (on my machine,) about 50,000 entries at a time, the time it takes to add `static` takes longer than any savings you would realize from now until the end of the universe. Unless you're working for a FAANG company or have a metric shit ton of page views.
